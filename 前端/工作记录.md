[2022 前端业务/技术需求汇总](https://supermonkey.feishu.cn/wiki/wikcn45kZSzEgJcMmRcuVOn97Ig#doxcngW0EOoQEEuIeicmiX6stKb) 

**遗留事项**

1. `filter(item => !isNil(item.categoryFirstTypeId))` 为什么需要判断空，应该去除
2. 文本折叠组件修改isReady的使用方式
3. 课程分类列表广告位
4. 私教首页刚进页面的时候有个“**显示更多**”字样
5.  
6. 控件中的状态没有保存到state，导致外面要用的时候总是得另外请求
7. 代码生成中应当增加ts类型的控制。可以用泛型来尝试处理
8. updateTableParams 增加返回值
9. 枚举按业务分类
10. UPDATE_${uppercaseNamespace}_TABLE_PARAMS_PUT
	1. 为什么会使用深度合并，这样会导致如果是清空的情况，没有成功清空
11. 做一个时间段选择组件，方便时间格式的转化
	1. 传入要对象，传出也要对象





- 为什么要切换支付方式



### 活动管理

- 私教课时返还
- [cms 价格处理](https://devops.aliyun.com/projex/project/0bc3ecd81254b72afdf4cf718c/req#viewIdentifier=8df3b6b394ada66bb35d5bb77a&openWorkitemIdentifier=0c9f0a118ead8218182f13bffd)
- 确认订单页优惠选择逻辑
- 

[‍‬‍⁤⁤‍‍⁢⁣⁣⁠Monkey-saas活动管理功能需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcn1fj0sYzh7VAEQYl7rKC6Oe)  


[随心练列表支持按定位城市显示 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnA7Lso9NEuKBEKz2DcmUoJg)  
[⁡‍体验价优化迭代需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/IAsJd8CLBoUsTtxIhDZczWB1nzf)

-   体验价优化，小程序界面修改
-   随心练购买重新获取超猩卡余额
-   接口定义


### 质量监测
[质量监控系统v1.0-迭代2 PRD - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnDNE4GRBstkqm4LSJHwESxf)

**文档地址**
-[质量监控系统-后端技术方案 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcn2MFp2Do17f15QBm1UFlRif)
[‍⁢⁣⁡质量监控系统v1.0-迭代1 PRD - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/Q1i4d7oYoonaH3xyUizc8Ci9nie)




### 猩意卡toB需求

[‍猩意卡toB需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnXbeeWYEM44zTh3p2LOKhSh)


### 课程库管理

[‌⁣⁢Monkey-saas课程库管理功能需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnFMKMtmk92NJx7y6dqx6FNb)

字段名称列表

- categoryGroupId

- categoryGroupName

- categoryFirstTypeId

- categoryFirstTypeName

- categorySecondTypeId

- categorySecondTypeName


### 随心练支持超猩卡

[‌‍⁤‌⁣‍‬随心练订单支持超猩卡支付 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcn59xwumpr8JV4SwmGbbwbCf)

- 确认新接口还是旧接口
- /pay/submitCard 接口 payType 增加 超猩卡支付
 

### 内效需求
[员工手册在线签署需求 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnMhHpVgsBvQTkyhe0yx6XSc)
[SAAS同步简道云组织架构基础表 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnzfUCqmBgFKykmKEMqvnpuc#jYBJVU)


### 售后应用优化

随心练订单延期 [ ‍售后优化需求- v1.6.0 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnixWzLvI2zSJBP5qiIl87mf#lOhA9C)

私教课时返还 [⁢ ‌‌⁤Monkey-saas售后应用优化需求 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnnNLjt6SaxbZfX9U2CqUcle#ZOii8D)
BZ 

[‌‍⁣⁢⁣‍⁤售后优化需求 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcn6uZBOuutNKUXslUzhjISah)


### 小需求

[「定向发券」时段限定优化需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnGCzFTgYn3PZ0DacsFGlnKd)



### 体验价支持超猩卡

[⁡体验价支持配置是否仅允许微信支付 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnjPXHJiZni0oetTdzQ5XjQd)

体验价

- 等候
  
   - 超猩卡余额充足，
  
   - 余额不足， 

- 非等候
  
   - 余额足够， 超猩卡支付
  
   - 余额不足， 微信支付

### 超小猩

[企微服务新用户-超小猩3.0（需求文档） - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnIyQyCc1W6le2gbn1eXTGAc)

### 内效需求

[​‌‍‬⁠⁡⁢⁣⁤﻿Monkey-saas组织应用控件优化 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnP3dfrUTzaj2tdvZaphP0Ic)

[​‌‍‬⁠⁡⁢⁣⁤﻿候选人流程接入背调系统 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnIZFoxdXZy2v6HVo0Kvnpee)

### 异常课表处理

[异常课表处理需求文档](https://supermonkey.feishu.cn/docx/doxcnJoOmKcnQ9sxf2nETQ4sKxb) 

- 路由
- isPromise
- 

```
处理类型。1-不作处理；2-课程下线并退款；3-补签；4-换教练；5-解散； 6-强制下线

一级原因。1-教练原因；2-课程原因；3-门店原因；4-天气原因；5-疫情原因；6-其他
二级原因。11-突发意外请假；12-私人事务请假；13-课程准备不足；14-旷课；15-早退；16-其他；21-排课不当；31-门店设备维护；32-门店物业问题；41-恶劣天气；51-疫情原因；61-其他


违纪行为。1-迟到；2-严重迟到；3-旷课；4-早退；5-严重早退；6-拖堂；7-突发意外状况未请假；8-劝退用户；9-疏忽大意导致人身侵害或公司财务受损；10-擅自承诺用户；11-推销行为；12-未按规定进行日程报备；13-未违约、未付费情况下使用公司产品；14-未经授权的课程相关行为；15-不当言论及行为；16-未经授权的商业行为；17-损害公司公关关系及品牌形象；18-性骚扰；19-孕期授课；20-利用公司资源谋取个人利益；21-违反公司保密协议；22-刻意隐瞒慢性病或传染病，或蓄意危害其他员工或员工健康；23-向用户索取礼物；24-以虚假理由进行请假或缺勤；25-违反国家法律法规规定；26-其他；
```

**权限点**

- 排课
  - 团体课排课
	  - 课表明细
		  - 发起团体课异常课表处理 abnormalSchedule-classSchedule-create
  - 训练营排课
	  - 发起训练营异常课表处理 abnormalSchedule-campSchedule-create
  - 创建异常课表处理记录 abnormalScheduleHandle-create /scheduleConfig/abnormal/create
  - 异常课表<mark>管理</mark> abnormalSchedule **菜单** 
     
      - 异常课表明细  abnormalScheduleListView **菜单** /courseSchedule/abnormalSchedule/list
        
         - ~~异常课表处理明细列表 abnormalScheduleList-queryList /scheduleConfig/abnormal/queryList~~
        
         - ~~异常课表处理流程操作。abnormalScheduleList-handleFlowOperation /scheduleConfig/abnormal/handleFlowOperation~~
        
         - 异常课表处理流程查看详情 abnormalScheduleList-queryOne  /scheduleConfig/abnormal/queryOne
        
         - 异常课表处理流程撤回 abnormalScheduleList-flowRevoke /scheduleConfig/abnormal/revoke
        
         - 异常课表处理流程重新发起 abnormalScheduleList-flowResend /scheduleConfig/abnormal/resend
     
      - ~~校验课表处理流程状态  abnormalHandleValidate /scheduleConfig/abnormal/abnormalHandleValidate~~
     
      - ~~团体课异常课表处理列表 abnormalScheduleHandle-classScheduleList /scheduleConfig/classSchedule/queryAbnormalList
     
      - ~~训练营异常课表处理列表 abnormalScheduleHandle-campScheduleList /scheduleConfig/campSchedule/queryAbnormalList
     
      - ~~创建异常课表处理记录 abnormalScheduleHandle-create /scheduleConfig/abnormal/create
     
      - ~~发起团体课异常课表处理 abnormalSchedule-classSchedule-create
     
      - ~~发起训练营异常课表处理 abnormalSchedule-campSchedule-create
  

- Go
   - GO课表
      - 发起SGO异常课表处理
         - abnormalSchedule-sgoSchedule-create
      - sgo创建异常课表处理记录
		- sgoAbnormalScheduleHandle-create
		- /scheduleConfig/abnormal/create
   - 异常课表 sgoAbnormalSchedule **菜单** 
      - 异常课表明细  sgoAbnormalScheduleListView **菜单** /sgoSchedule/abnormalSchedule/list
	      - SGO异常课表处理流程查看详情
		      - sgoAbnormalScheduleList-queryOne
		      - /scheduleConfig/abnormal/queryOne
		  - SGO异常课表处理流程撤回
			  - sgoAbnormalScheduleList-flowRevoke
			  - /scheduleConfig/abnormal/revoke
		  - SGO异常课表处理流程重新发起
			  - sgoAbnormalScheduleList-flowResend
			  - /scheduleConfig/abnormal/resend
      - ~~SGO异常课表处理列表
         - ~~abnormalScheduleHandle-sgoScheduleList~~
         - ~~/sgoConfig/sgoSchedule/queryAbnormalList~~

**去除权限点**
1. 团体课异常课表处理列表 /scheduleConfig/classSchedule/queryAbnormalList
2. 训练营异常课表处理列表 /scheduleConfig/campSchedule/queryAbnormalList
3. SGO异常课表处理列表 /sgoConfig/sgoSchedule/queryAbnormalList
4. 校验课表处理流程状态 /scheduleConfig/abnormal/abnormalHandleValidate
5. 异常课表处理明细列表 /scheduleConfig/abnormal/queryList


**新增权限点**
- sgo创建异常课表处理记录
	- sgoAbnormalScheduleHandle-create
	- /scheduleConfig/abnormal/create

**修改权限点**
- sgo 异常课表明细 路径



[「智齿对接页面」需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnWg2BKWgKoyw1u8ESL8CZig) 

- 【处理】 按钮的位置需要确认

https://saas-sgo-web.uat.supermonkey.com.cn/

[百动网对接产品需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnefi3Ejb4QHZk0EXVtHBo9c) 

新增子应用

**权限点**

- 企业管理 enterprise 应用 企业管理服务 //enterprise.dev.supermonkey.com.cn
  
   - 代金券 enterprise-ticket  菜单 /enterprise/ticket
     
      - 代金券管理 enterprise-ticket-manage  菜单  /enterprise/ticket/manage
     
      - 导出代金券 enterprise-ticketExport  权限点 /enterpriseConfig/ticket/export
     
      - 设置代金券阈值 enterprise-updateTicketThreshold 权限点 /enterpriseConfig/ticket/threshold
     
      - 获取代金券预警阈值 enterprise-getTicketThreshold 权限点 /enterpriseConfig/ticket/getThreshold

[企业特权约课人数限制产品方案 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnV3PnhVGiwIbkfCbeSgMgfg)。前端无改动。

[Monkey-saas排课应用优化 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnkaRVUfuj4MuvU7DN0ZK7Wg#xr1KSj)

- /v1/scheduleConfig/normalCampSubSchedule/create 后端有检验“课时费分配规则不能为空”

### 8 周年

[超猩 8 周年前端接口定义 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnii9g32I39bmeTVDNFcXWZc)

[8周年活动需求方案 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcntAIlkiyIoX2vi4Q66OOKWh)

[任务拆解和工作量评估 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcngnrZF6QehVA0ZfdUFQowzc)

[🍑前端设计协作-8周年活动 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnVqxqGq3Fs6qapM3gvqXlEb)

#### 8 周年私教

[活动详情页设计稿](https://supermonkey.feishu.cn/docx/doxcnznaogFGwTkZVuO4klQDhWh)

待办： 

- 海报二维码
   - 用户海报：https://img.supermonkey.com.cn/webapp/monkey-reservation2/activity-8years/poster/poster-qrcode.png
   - 邀请海报： 后端 qrCode 字段

**逻辑**

1. 顶部展示内容，

### 完善课程信息

[「完善课程信息」需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnnxfnICH9fA01tOdKfbeANh#DpDDhO)

[「课程体系梳理」项目一期技术方案 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcn7ey7phahgqPK2UZn7jfETc?table=tblMwJF6lydeMPJI&view=vewN2Np76t)

[🍉 课程体系梳理接口文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnk6w20WONSyIRk31iiY82ic)

[Feishu Sheet](https://supermonkey.feishu.cn/sheets/shtcndKmsBvKgslnQJZljPDd3ic?sheet=oZdjQQ)

**待处理事项**

1. !! **TextMultiLineWithUnfold组件的改动让大侠看下，更新到基础组件**
2. 
3. git 不区分大小写导致文件夹变更无法检测
4. isNil 加注释
5. 
6. 【课表/课程详情页】当课程的注意事项 和 建议训练频率 都为空时，约课指引 模块及顶部标签不展示 ok
7. 【课程详情页】当无推荐课程时，推荐课程模块不展示 ok
8. 【课程列表页】用户填写反馈后的toast提示 需要更明显 背景颜色 （未实现此能力）
9. 【课程列表页】标题及描述文字的间距需要修改 ok
10. 【课表/课程详情页】课程等级 弹窗，强度及难度解释语修改 ok 

**已完成**

1. 【课表详情页】课程详情标题样式与其他不一致（字体、上下间距） （用户评价标题与教练主页共用，确认影响）

2. 【课表详情页】教练昵称与教练标签 之间没有间距 ok

3. 【课表详情页】课程简介未超过3行，也显示...  ok

4. 【课表详情页】消耗量约等于n瓶可乐，未用公式计算 ok

5. 【课表详情页】课程详情标题名称改为  课程介绍 ok

6. 【课表详情页】课程介绍更多弹窗，课程介绍内容文字颜色与其他不一致 ok

7. 【课表详情页】顶部页签标识少了「约课指引」模块 ok

8. 【课程详情页】不叫 最近课表，叫 近期课表 ok

9. 【课程详情页】近期课表与约课指引两个模块的 间距不一致 ok接口中不存在是否是超级星探字段

10. 教练旁的超级星探宽度限制
    
     1. 教练勋章展示

11. 确认勋章规则
    
     1. `decorate-type="{{ item.trainerTagList.length > 0 ? 'badge-black-1': '' }}"`

12. !! **TextMultiLineWithUnfold组件的改动让大侠看下，更新到基础组件**

13. ** 接口联调 **  ok
    
     - [/wxClass/getCategoryFirstTypeRecentSchedule](http://nei.internal.supermonkey.com.cn/interface/detail/res/?pid=10058&id=11377)
       
        - trainerSmallMap -> trainerMap 
    
     - 原来的课程反馈是否展示是后端控制，现在如何(保留原来逻辑) ok
    
     - 页面浏览的属性新增一个（找大侠看下）ok

替换一级类目map内容

> 暂时不建议进行替换。

- classRelate缺失字段
   1. titleImage(或许是coverImage？)
   2. recommend
   3. isFreshmanFriendly
   4. tags（对应allTagList？）
- 分歧字段
   - Map
      1. intensityIndex
   - classRelate: 
      1. classIntensity
- 定义表不同位置字段
   - teachingMode/classLevel（map是表示一级类目信息，但是这些信息在本迭代放在了课程信息中）

### 排课应用优化

[Monkey-saas排课应用优化 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnkaRVUfuj4MuvU7DN0ZK7Wg#xr1KSj)

### 四月下旬排课数据标记和看板

[Monkey-saas辅助排课工具需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docx/doxcnvMcXLwpR4wxXtdwnXqCFVh)

courseSchedule/offlineCampSchedule/packageDetail/1970014215/create

**权限点控制**

- 日历课表历史数据看板
   - classScheduleCalendarView-queryHistorySaleInfo
   - /scheduleConfig/boxView/queryHistorySaleInfo
- 查询排课管理列表销售信息列表
   - classScheduleCalendarView-querySaleList
   - /scheduleConfig/boxView/querySaleList

3.23第二节课

bookingCountContrast/saleInfoList - assistantCoach 返回字段名有误

assistantCoach 会导致无法显示所有教练文本，无法选择到编辑框

选择到编辑框除了价格校验，还有预约人数校验？

### 私教 top 3

[【私教】自主预约限制优化--产品需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccn6Lz3Ap64E3SHKGZZep1fWc)

[业务服务组迭代计划/排期](https://supermonkey.feishu.cn/docx/doxcn9ERdzFG1L7g9ZmdPINL8Fb)

[2022-04-08 迭代接口文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcncONKft6EWmHwpKP8O58dXb)

[测试用例](https://supermonkey.feishu.cn/docs/doccn6Lz3Ap64E3SHKGZZep1fWc)

#### review

- selectDateValidDurations ？。运算符

- filter(dateTime => !prop('reason')(dateTime))   reject 函数

- this.dateTimes =   （刚进来的时候可以触发toggleOnlyEnableTime来实现逻辑复用）

- this.dateTimes = filter(dateTime => !prop('reason')(dateTime))(this.dateTimeList)
  
   - 应该以enable作为判断依据

- 先更新列表再到index

- 派生数据都用计算属性

- 

- 时间选择的日期，如果是今天应展示“今天”，而不是星期

请求用简写

### 四月中旬迭代

取消调整功能

### 愚人节私教课包

[私教限时15课时优惠课包-需求文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/docs/doccnQRBft4wkeO8NCAVXfkCdbg)

[3月优惠联合开发-接口文档 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnnpzbdBx69yxR0M2ofi2Sqc)

[3月迭代提测时间 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcnAJi53VNI5A9rOVfj8IK7Ad)

[🍑体验价+私教愚人节优惠 - 飞书云文档 (feishu.cn)](https://supermonkey.feishu.cn/wiki/wikcn0fbdrFvTzeflboUmR9LiYR)

**review 问题**

- limitPayWay 接口文档未更新

- limitStrList 应该设计成string类型

- ？. 代表的场景是已知的不存在

- http://gitlab.internal.supermonkey.com.cn/supermonkey-web/monkey-reservation2.0/-/merge_requests/556#note_8251 这个啥意

- discountRule
  
   - 组件id写死
  
   - 跟设计确定是否可以统一。不统一将rule写到函数

- src/store/biz/personal/personalList.js 将门店私教列表抽出，改名为 personalHomeList，新建文件 personalBoxScheduleList.js放门店私教列表内容。

- ​    门店与私教列表页 接口就应该与私教首页个人私教部分保持一致，没用上的也应该保留。因为私教首页会用到 不然就会有问题

首页入口 [personal-discount-banner.png (702×208) (supermonkey.com.cn)](https://img.supermonkey.com.cn/webapp/monkey-reservation2/experience/personal-discount-banner.png)

活动介绍海报 [personal-discount-poster.png (750×894) (supermonkey.com.cn)](https://img.supermonkey.com.cn/webapp/monkey-reservation2/experience/personal-discount-poster.png)

课程介绍 * 2 ：

1. 普通私教： [custom-personal.png (702×632) (supermonkey.com.cn)](https://img.supermonkey.com.cn/webapp/monkey-reservation2/personal/discount/custom-personal.png)
2. 资深私教： [senior-custom-personal.png (702×632) (supermonkey.com.cn)](https://img.supermonkey.com.cn/webapp/monkey-reservation2/personal/discount/senior-custom-personal.png)

## 展示小程序

banner、bottomline，copyrightbottom，imgtip移到datadisplay

ButtonPageResident 引入global-ui ，现在去除，观察是否异样

注意tooltip组件的阴影
